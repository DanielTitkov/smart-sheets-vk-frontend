(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{188:function(e,t,n){e.exports=n(353)},277:function(e,t,n){},296:function(e,t,n){},297:function(e,t,n){},298:function(e,t,n){},299:function(e,t,n){},300:function(e,t,n){},301:function(e,t,n){},302:function(e,t,n){},327:function(e,t){},345:function(e,t,n){},346:function(e,t,n){},347:function(e,t,n){},348:function(e,t,n){},349:function(e,t,n){},350:function(e,t,n){},352:function(e,t,n){},353:function(e,t,n){"use strict";n.r(t);n(189),n(215),n(217),n(218),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257);var a=n(0),r=n.n(a),c=n(53),l=n.n(c),u=n(54),i=n.n(u),o=n(2),s=n(18),E=function(e){return function(t,n){t({type:"SET_ACTIVE_PANEL",panel:e})}},m=n(6);function d(e){var t=e.onClose,n=e.error;return r.a.createElement(o.u,{layout:"vertical",onClose:t},r.a.createElement("p",null,n?n.toString():"Everything is OK"))}n(277);var f=function(e){var t=Object(m.b)(),n=e.currentUser;return n&&n.profile&&r.a.createElement(o.i,null,r.a.createElement(o.d,{before:n.profile.photo_200?r.a.createElement(o.b,{src:n.profile.photo_200}):null,size:"l",description:n.profile.city&&n.profile.city.title?n.profile.city.title:"",asideContent:r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(o.c,{className:"UserSnippet-button",mode:"tertiary",onClick:function(){return t(E("about"))}},"\u041e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438"),r.a.createElement(o.c,{className:"UserSnippet-button",mode:"tertiary",onClick:function(){return t(E("profilesettings"))}},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"))},"".concat(n.profile.first_name," ").concat(n.profile.last_name)))},p=n(48),b=n.n(p),S=n(132),h=n.n(S),v=n(133),O=n.n(v),_=n(7),T=n(43),R={API_URL:"https://smart-sheets-backend.appspot.com/api/rest/",DEFAULT_DATA_FIELD:"content",EDITOR_SAVE_INTERVAL:5e4,urls:{PROFILE:"accounts/profile",SETTINGS:"accounts/settings",RUBRICS:"rubrics/"}},j=n(33),C=n.n(j),g=function(e){var t={};return e&&e.forEach((function(e){t[e.elementId]=e.content})),t},y=function(e){return Object.entries(e).map((function(e){var t=Object(s.a)(e,2);return{elementId:t[0],content:t[1]}}))},U=function(e){return function(t,n){var a=n().sheets.activeSheet,r=null;e&&e.blueprint?r=a&&a.id&&a.id===e.id?a:e:(r={}).blueprint=e,t({type:"SET_ACTIVE_SHEET",sheet:r})}},N=function(e){return function(t,n){t({type:"SET_ACTIVE_RUBRIC",rubric:e})}},I=function(){return function(e,t){e({type:"SET_LOADING"});var n=R.API_URL,a=t().validation.vkquery,r=Object(_.a)({},a.query);C.a.get(n+"sheets/",{params:r}).then((function(t){e({type:"GET_RECENT_SHEETS_SUCCESS",sheets:t.data})})).catch((function(t){e({type:"GET_RECENT_SHEET_ERROR",error:t})}))}},k=function(){return function(e,t){var n=R.API_URL,a=t().sheets.activeSheet,r=t().validation.vkquery;a&&a.id?C.a.put(n+"sheets/"+a.id+"/",{blueprintId:a.blueprint.id,data:y(a.data)},{params:Object(_.a)({},r.query)}).then((function(t){e({type:"POST_ACTIVE_SHEET_SUCCESS",sheet:t.data}),e(I())})).catch((function(t){e({type:"POST_ACTIVE_SHEET_ERROR",error:t})})):a&&C.a.post(n+"sheets/",{blueprintId:a.blueprint.id,data:y(a.data)},{params:Object(_.a)({},r.query)}).then((function(t){e({type:"POST_ACTIVE_SHEET_SUCCESS",sheet:t.data}),e(I())})).catch((function(t){e({type:"POST_ACTIVE_SHEET_ERROR",error:t})}))}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t,n){t({type:"SET_LOADING"});var a=R.API_URL,r=n().validation.vkquery,c=e?Object(_.a)({},r.query,{parent:e.id}):Object(_.a)({},r.query);C.a.get(a+R.urls.RUBRICS,{params:c}).then((function(e){t({type:"GET_SHEET_RUBRICS_SUCCESS",rubrics:e.data})})).catch((function(e){t({type:"GET_SHEET_RUBRICS_ERROR",error:e})}))}},L=(n(296),function(e){var t=R.DEFAULT_DATA_FIELD,n=e.params,c=e.data,l=e.updateFunction,u=Object(a.useState)(c?c[t]:""),i=Object(s.a)(u,2),E=i[0],m=i[1];return Object(a.useEffect)((function(){l(E,t)}),[E,t]),r.a.createElement("div",{className:"TextFrame"},r.a.createElement(o.g,null,r.a.createElement("div",{className:"TextFrame-header"},n.imageURL&&r.a.createElement("div",{className:"TextFrame-header-image"},r.a.createElement("img",{src:n.imageURL,alt:""})),r.a.createElement("div",{className:"TextFrame-header-text"},n.title?r.a.createElement("h2",null,n.title):null,n.desc?r.a.createElement("h3",null,n.desc):null)),r.a.createElement("div",{className:"TextFrame-textarea-wrap"},r.a.createElement(o.x,{value:E,onChange:function(e){return m(e.target.value)}}))))}),P=(n(297),function(e){var t=R.DEFAULT_DATA_FIELD,n=e.params,c=e.data,l=e.updateFunction,u=Object(a.useRef)(null),i=Object(a.useState)(!1),o=Object(s.a)(i,2),E=o[0],m=o[1],d=Object(a.useState)(c?c[t]:n.title),f=Object(s.a)(d,2),p=f[0],b=f[1],S=function(e){u.current&&!u.current.contains(e.target)&&m(!1)};return Object(a.useEffect)((function(){return E&&document.addEventListener("mousedown",S),function(){document.removeEventListener("mousedown",S)}})),Object(a.useEffect)((function(){l(p,t)}),[p,t]),r.a.createElement("div",{className:"SheetTitle"},E?r.a.createElement("input",{autoFocus:!0,ref:u,value:p,onChange:function(e){return b(e.target.value)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043b\u0438\u0441\u0442\u043e\u0447\u043a\u0430"}):r.a.createElement("h1",{onClick:function(e){m(!0)}},p||n.title))}),D={maxHeight:"100%",maxWidth:"100%",objectFit:"cover",objectPosition:"center"},G=function(e){return{backgroundImage:"url(".concat(e,")")}},w=(n(298),function(e){var t=e.params;return t.imageURL?r.a.createElement("div",{className:"SheetHeader-image-wrap",style:G(t.imageURL)}):null}),x=function(e,t){return e[t]},V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R.DEFAULT_DATA_FIELD,n=x(e.data,e.blueprint.titleElementId);return n?n[t]:null},q=function(e){var t=e.onClose,n=e.action,a=e.title,c=e.message;return r.a.createElement(o.a,{actionsLayout:"vertical",actions:[{title:a,autoclose:!0,mode:"destructive",action:n},{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],onClose:function(){return t()}},r.a.createElement("h2",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"),r.a.createElement("p",null,c))},H=(n(299),function(e){var t=Object(m.b)(),n=e.sheet,a=V(n),c=r.a.createElement(q,{onClose:function(){return t((function(e,t){e({type:"CLOSE_POPOUT"})}))},action:function(){return t(function(e){return function(t,n){var a=R.API_URL,r=n().validation.vkquery;C.a.put(a+"sheets/"+e.id+"/",{blueprintId:e.blueprint.id,data:y(e.data),deleted:!0},{params:Object(_.a)({},r.query)}).then((function(n){t({type:"DELETE_SHEET_SUCCESS",id:e.id}),t(I())})).catch((function(e){t({type:"DELETE_SHEET_ERROR",error:e})}))}}(n))},title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043b\u0438\u0441\u0442\u043e\u0447\u043a\u0430",message:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u043b\u0438\u0441\u0442\u043e\u0447\u0435\u043a?"}),l=b()(n.updated).format("DD.MM.YYYY hh:mm");return r.a.createElement("div",{className:"SheetSnippet"},r.a.createElement(o.d,{before:n.blueprint.imageUrl&&r.a.createElement(o.b,{className:"SheetSnippet-avatar",type:"image",src:n.blueprint.imageUrl,style:D}),description:n.blueprint.type+" | "+l,asideContent:r.a.createElement("div",{className:"SheetSnippet-controls"},r.a.createElement(o.c,{before:r.a.createElement(h.a,null),onClick:function(){t(U(n)),t(E("editor"))}},"Edit"),r.a.createElement(o.c,{before:r.a.createElement(O.a,null),onClick:function(){return t((e=c,function(t,n){t({type:"OPEN_POPOUT",popout:e})}));var e}},"Delete"))},a))}),z=(n(300),function(e){var t=e.sheets,n=e.loading;return r.a.createElement(o.n,null,n?r.a.createElement(o.v,{size:"large",className:"SheetList-spinner"}):null,t?t.map((function(e){return r.a.createElement(H,{key:e.id,sheet:e})})):r.a.createElement(o.d,null,"No sheets yet"))}),B=function(e){var t=Object(m.b)(),n=Object(m.c)((function(e){return e.sheets.activeSheet}));return n?r.a.createElement(o.i,{header:r.a.createElement(o.j,{mode:"secondary"},"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0439 \u043b\u0438\u0441\u0442\u043e\u0447\u0435\u043a")},r.a.createElement(o.d,{before:r.a.createElement(o.b,{size:72,src:n.blueprint.imageUrl,style:D}),multiline:!0,size:"l",description:n.blueprint.type,bottomContent:r.a.createElement("div",null,r.a.createElement(o.c,{onClick:function(){return t(E("editor"))}},"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"))},V(n))):null},F=function(e){var t=e.id,n=Object(m.b)(),c=Object(m.c)((function(e){return e.user.currentUser})),l=Object(m.c)((function(e){return e.sheets.loading})),u=Object(m.c)((function(e){return e.sheets.recentSheets})),i=Object(m.c)((function(e){return e.sheets.error})),p=Object(a.useState)(null),b=Object(s.a)(p,2),S=b[0],h=b[1];return Object(a.useEffect)((function(){var e=r.a.createElement(d,{onClose:function(){return h(null)},error:i});i&&h(e)}),[i]),Object(a.useEffect)((function(){n(I())}),[n]),r.a.createElement(o.o,{id:t},r.a.createElement(o.p,null,"\u0423\u043c\u043d\u044b\u0435 \u041b\u0438\u0441\u0442\u043e\u0447\u043a\u0438"),r.a.createElement(f,{currentUser:c}),r.a.createElement(B,null),r.a.createElement(o.i,null,r.a.createElement(o.e,null,r.a.createElement(o.c,{size:"xl",mode:"secondary",onClick:function(){return n(E("rubrics"))}},"Add new Smart Sheet")),r.a.createElement(z,{sheets:u,loading:l})),r.a.createElement(o.f,null,"Write for happiness"),S)},K=function(){return function(e,t){var n=t().user.currentUser.profile,a=function(e){var t=b()(e,"DD.MM.YYYY");return b()().diff(t,"years",!1)}(n.bdate),r={age:a||void 0,sex:n.sex?n.sex:void 0,city:n.city?n.city.title:void 0,timezone:n.timezone?n.timezone:void 0,country:n.country?n.country.title:void 0},c=t().validation.vkquery,l=R.API_URL;C.a.post(l+R.urls.PROFILE,r,{params:Object(_.a)({},c.query)}).then((function(t){e({type:"SEND_USER_DATA_SUCCESS"}),e(Y())})).catch((function(t){e({type:"SEND_USER_DATA_ERROR",error:t})}))}},Y=function(){return function(e,t){var n=t().validation.vkquery,a=R.API_URL;C.a.get(a+R.urls.SETTINGS,{params:Object(_.a)({},n.query)}).then((function(t){console.log("RESP",t.data),e({type:"GET_USER_SETTINGS_SUCCESS",settings:t.data})})).catch((function(t){console.log("ERR",t),e({type:"GET_USER_SETTINGS_ERROR",error:t})}))}},M=n(29),W=n.n(M),J=n(30),Q=n.n(J),X=(n(301),function(e){var t=Object(m.b)(),n=e.blueprint;return r.a.createElement("div",{className:"NewSheetSnippet",onClick:function(){t(U(n)),t(E("details"))}},r.a.createElement("div",{className:"NewSheetSnippet-image",style:G(n.imageUrl)}),r.a.createElement("div",{className:"NewSheetSnippet-content"},r.a.createElement("h4",{className:"NewSheetSnippet-title"},n.type),r.a.createElement("p",{className:"NewSheetSnippet-desc"},n.desc)))}),Z=(n(302),function(e){var t=e.blueprints;return r.a.createElement(o.n,{className:"NewSheetList"},t&&0!==t.length?t.map((function(e){return r.a.createElement(X,{key:e.type,blueprint:e})})):r.a.createElement(o.d,null,r.a.createElement("h3",null,"No Sheet Blueprints =(")))}),$=Object(o.z)(),ee=function(e){var t=Object(m.b)(),n=Object(m.c)((function(e){return e.sheets.sheetBlueprints})),c=Object(m.c)((function(e){return e.sheets.error})),l=Object(m.c)((function(e){return e.sheets.activeRubric})),u=Object(a.useState)(null),i=Object(s.a)(u,2),f=i[0],p=i[1];return Object(a.useEffect)((function(){t(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t,n){var a=R.API_URL,r=n().validation.vkquery,c=e?Object(_.a)({},r.query,{rubric:e.id}):Object(_.a)({},r.query);C.a.get(a+"blueprints/",{params:c}).then((function(e){t({type:"GET_SHEET_BLUEPRINTS_SUCCESS",blueprints:e.data})})).catch((function(e){t({type:"GET_SHEET_BLUEPRINTS_ERROR",error:e})}))}}(l))}),[t,l]),Object(a.useEffect)((function(){var e=r.a.createElement(d,{onClose:function(){return p(null)},error:c});c&&p(e)}),[c]),r.a.createElement(o.o,{id:e.id},r.a.createElement(o.p,{left:r.a.createElement(o.q,{onClick:function(){t(E("rubrics")),t(N(null))}},$===o.k?r.a.createElement(W.a,null):r.a.createElement(Q.a,null))},"\u041a\u0430\u0442\u0430\u043b\u043e\u0433 | ",l?l.title:"\u0412\u0441\u0435 \u043b\u0438\u0441\u0442\u043e\u0447\u043a\u0438"),r.a.createElement(Z,{blueprints:n}),f)},te=function(e){var t=e.settings,n=Object(a.useState)(!!t&&t.encrypt),c=Object(s.a)(n,2),l=c[0],u=c[1];return r.a.createElement(o.n,null,r.a.createElement(o.d,{asideContent:r.a.createElement(o.w,{checked:l,onChange:function(){u(!l)}})},"\u0428\u0438\u0444\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0435\u043a\u0441\u0442\u044b"),l?r.a.createElement(o.g,null,r.a.createElement(o.h,{top:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u0434\u043b\u044f \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u044f",bottom:"\u0425\u043e\u0440\u043e\u0448\u043e \u0437\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c. \u041e\u043d \u043d\u0435 \u0445\u0440\u0430\u043d\u0438\u0442\u0441\u044f \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0432\u0430\u0448\u0438\u0445 \u0442\u0435\u043a\u0441\u0442\u043e\u0432 (\u043d\u0435 \u0434\u043b\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044e). \u0415\u0441\u043b\u0438 \u0432\u044b \u043f\u043e\u0442\u0435\u0440\u044f\u0435\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c, \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0437\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0442\u0435\u043a\u0441\u0442\u044b \u0431\u0443\u0434\u0435\u0442 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e."},r.a.createElement(o.m,{type:"text",defaultValue:""}))):null)},ne=Object(o.z)(),ae=function(e){var t=Object(m.b)(),n=Object(m.c)((function(e){return e.user.currentUser}));return console.log("CURRENT USER",n),r.a.createElement(o.o,{id:e.id},r.a.createElement(o.p,{left:r.a.createElement(o.q,{onClick:function(){return t(E("home"))}},ne===o.k?r.a.createElement(W.a,null):r.a.createElement(Q.a,null))},"Profile Settings"),n?r.a.createElement(te,{settings:n?n.settings:null}):r.a.createElement(o.r,null),r.a.createElement(o.n,null,r.a.createElement(o.d,null,r.a.createElement(o.c,{stretched:!0,size:"xl",onClick:function(){return t(E("home"))}},"\u041d\u0430\u0437\u0430\u0434"))),r.a.createElement(o.f,null,"\u0428\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043a\u0430 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442"))},re=n(55),ce=n.n(re),le=(n(345),function(e){var t=e.title,n=e.text,a=e.onButtonClick;return r.a.createElement("div",{className:"SheetGuideBlock-body-wrap"},r.a.createElement("div",{className:"SheetGuideBlock-body"},r.a.createElement("p",null,r.a.createElement("b",null,t)),r.a.createElement(o.t,{wide:!0}),r.a.createElement("div",{className:"SheetGuideBlock-text-wrap"},n?ce()(n):"\u041f\u043e\u043a\u0430 \u043d\u0435\u0442 \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043b\u0438\u0441\u0442\u043e\u0447\u043a\u0430"),r.a.createElement(o.c,{size:"m",stretched:!0,mode:"outline",onClick:a},"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c")))}),ue=(n(346),function(e){var t=e.params,n=t.guide,c=t.example,l=Object(a.useState)(!1),u=Object(s.a)(l,2),i=u[0],E=u[1],m=Object(a.useState)(!1),d=Object(s.a)(m,2),f=d[0],p=d[1];return r.a.createElement("div",{className:"SheetGuide"},r.a.createElement(o.d,{className:"SheetGuide-controls"},r.a.createElement("div",{className:"SheetGuide-controls-inner-wrap"},r.a.createElement("p",{className:"SheetGuide-controls-text"},"\u0418\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f"),r.a.createElement(o.w,{className:"SheetGuide-switch",checked:i,onChange:function(){return E(!i)}}),r.a.createElement("p",{className:"SheetGuide-controls-text"},"\u041f\u0440\u0438\u043c\u0435\u0440"),r.a.createElement(o.w,{className:"SheetGuide-switch",checked:f,onChange:function(){return p(!f)}}))),i?r.a.createElement(le,{title:"\u0418\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f",text:n,onButtonClick:function(){return E(!i)}}):null,f?r.a.createElement(le,{title:"\u041f\u0440\u0438\u043c\u0435\u0440",text:c,onButtonClick:function(){return p(!f)}}):null)}),ie=(n(347),Object(o.z)()),oe=function(e){var t=Object(m.b)(),n=Object(m.c)((function(e){return e.sheets.activeSheet})),c=function(e,t,n,a){return e.map((function(e){return r.a.createElement(a[e.type],{key:e.id,updateFunction:function(t,a){return n(e.id,t,a)},data:t?x(t,e.id):null,params:e.params},null)}))}(n.blueprint.structure,n.data,(function(e,n,a){return t(function(e,t,n){return function(a,r){a({type:"UPDATE_ACTIVE_SHEET_DATA",id:e,data:Object(T.a)({},n,t)})}}(e,n,a))}),{TextFrame:L,SheetTitle:P,SheetHeader:w});return Object(a.useEffect)((function(){var e=setInterval((function(){t(k())}),R.EDITOR_SAVE_INTERVAL);return function(){clearInterval(e),t(k())}}),[t]),r.a.createElement(o.o,{id:e.id},r.a.createElement(o.p,{left:r.a.createElement(o.q,{onClick:function(){return t(E("home"))}},ie===o.k?r.a.createElement(W.a,null):r.a.createElement(Q.a,null))},"Sheets Editor"),r.a.createElement("div",{className:"Editor-header-wrap"},r.a.createElement(w,{params:{imageURL:n.blueprint.imageUrl}}),r.a.createElement(ue,{params:{guide:n.blueprint.guide,example:n.blueprint.example}})),r.a.createElement(o.e,{className:"Editor-sheet-wrap"},c),r.a.createElement(o.e,null,r.a.createElement(o.c,{stretched:!0,size:"xl",onClick:function(){return t(E("home"))}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438 \u0432\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f")))},se=(n(348),function(e){var t=Object(m.b)(),n=e.blueprint;return n?r.a.createElement(r.a.Fragment,null,r.a.createElement(o.e,{className:"SheetDetails-image-wrap",style:G(n.imageUrl)}),r.a.createElement(o.n,null,r.a.createElement(o.d,null,r.a.createElement(o.l,{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"},n.type)),r.a.createElement(o.d,{multiline:!0},r.a.createElement(o.l,{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",size:"l"},n.desc)),r.a.createElement(o.d,{multiline:!0},r.a.createElement(o.l,{title:"\u0418\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f",size:"l"},ce()(n.guide))),r.a.createElement(o.d,null,r.a.createElement(o.e,null,r.a.createElement(o.c,{stretched:!0,size:"xl",onClick:function(){t(U(null)),t(E("catalog"))}},"\u041d\u0430\u0437\u0430\u0434")),r.a.createElement(o.e,null,r.a.createElement(o.c,{stretched:!0,size:"xl",mode:"secondary",onClick:function(){t(N(null)),t(E("editor"))}},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c!"))))):null}),Ee=Object(o.z)(),me=function(e){var t=Object(m.b)(),n=Object(m.c)((function(e){return e.sheets.activeSheet}));return r.a.createElement(o.o,{id:e.id},r.a.createElement(o.p,{left:r.a.createElement(o.q,{onClick:function(){t(U(null)),t(E("catalog"))}},Ee===o.k?r.a.createElement(W.a,null):r.a.createElement(Q.a,null))},"Sheet Details"),r.a.createElement(se,{blueprint:n?n.blueprint:null}))},de=Object(o.z)(),fe=function(e){var t=Object(m.b)();return r.a.createElement(o.o,{id:e.id},r.a.createElement(o.p,{left:r.a.createElement(o.q,{onClick:function(){return t(E("home"))}},de===o.k?r.a.createElement(W.a,null):r.a.createElement(Q.a,null))},"\u041e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438"),r.a.createElement(o.n,null,r.a.createElement(o.d,{multiline:!0},r.a.createElement("h1",null,"\u0423\u043c\u043d\u044b\u0435 \u043b\u0438\u0441\u0442\u043e\u0447\u043a\u0438"),r.a.createElement("p",null,"\u042d\u0442\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 - \u0441\u0431\u043e\u0440\u043d\u0438\u043a \u043f\u0438\u0441\u044c\u043c\u0435\u043d\u043d\u044b\u0445 \u043f\u0440\u0430\u043a\u0442\u0438\u043a \u0434\u043b\u044f VK."),r.a.createElement("p",null,'\u041a\u0430\u0436\u0434\u0430\u044f \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0430 - \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 "\u043b\u0438\u0441\u0442\u043e\u0447\u0435\u043a". \u041b\u0438\u0441\u0442\u043e\u0447\u043a\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u044e\u0442\u0441\u044f \u043f\u0440\u0438 \u0432\u044b\u0445\u043e\u0434\u0435 \u0438\u0437 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440\u0430 (\u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0441\u0442\u0440\u0435\u043b\u043e\u0447\u043a\u0438 "\u043d\u0430\u0437\u0430\u0434" \u0432 \u0448\u0430\u043f\u043a\u0435 \u0438\u043b\u0438 \u043a\u043d\u043e\u043f\u043a\u0438 "\u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438 \u0432\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f" \u0432\u043d\u0438\u0437\u0443 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b), \u0430 \u0442\u0430\u043a\u0436\u0435 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043a\u0430\u0436\u0434\u044b\u0435 50 \u0441\u0435\u043a\u0443\u043d\u0434. \u0418\u0445 \u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0432 \u043b\u044e\u0431\u043e\u043c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430, \u0432\u0441\u0435\u0433\u0434\u0430 \u043c\u043e\u0436\u043d\u043e \u0432\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u043c.'),r.a.createElement("p",null,"\u041d\u0430\u0441\u0447\u0435\u0442 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u0438: \u0438\u043d\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u043e \u043d\u043e\u043c\u0435\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f VK, \u043d\u043e \u0441\u0430\u043c\u0438 \u043d\u043e\u043c\u0435\u0440\u0430 \u0432 \u0431\u0430\u0437\u0435 \u043d\u0435 \u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f, \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u044e\u0442\u0441\u044f \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u044b\u0435 \u0445\u044d\u0448\u0438 \u0438\u0437 \u043d\u0438\u0445 (\u0442.\u0435. \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u0430\u0439\u0434\u0438\u0448\u043d\u0438\u043a \u043f\u043e \u0445\u044d\u0448\u0443 \u043d\u0435\u043b\u044c\u0437\u044f). \u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u043a\u0442\u043e \u0447\u0442\u043e \u043d\u0430\u043f\u0438\u0441\u0430\u043b. \u0412 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0430\u043d\u043e \u0442\u0430\u043a\u0436\u0435 \u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u0435\u043a\u0441\u0442\u043e\u0432 \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f. \u041a\u043e\u0434 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0438 \u0430\u0432\u0442\u043e\u0440\u0430:",r.a.createElement("span",null,"\xa0",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/DanielTitkov/smart-sheets-backend"},"\u0431\u044d\u043a\u0435\u043d\u0434")),r.a.createElement("span",null,"\xa0",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/DanielTitkov/smart-sheets-vk-frontend"},"\u0444\u0440\u043e\u043d\u0442\u0435\u043d\u0434")),".",r.a.createElement("br",null),"\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u0432\u0435\u043d\u0443\u0442\u043e \u043d\u0430 Google Cloud Platform."),r.a.createElement("p",null,"\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u043e\u043a\u0430 \u0432 \u0441\u0442\u0430\u0434\u0438\u0438 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f. \u0415\u0441\u043b\u0438 \u0447\u0442\u043e-\u043d\u0438\u0431\u0443\u0434\u044c \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442, \u043d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0430\u0432\u0442\u043e\u0440\u0443. \u0415\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u043a\u0430\u043a\u0438\u0435-\u043d\u0438\u0431\u0443\u0434\u044c \u0438\u0434\u0435\u0438 \u043d\u0430\u0441\u0447\u0435\u0442 \u0440\u0430\u0437\u0432\u0438\u0442\u0438\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f - \u0442\u043e\u0436\u0435 \u043f\u0438\u0448\u0438\u0442\u0435, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430.")),r.a.createElement(o.d,null,r.a.createElement(o.c,{stretched:!0,size:"xl",onClick:function(){return t(E("home"))}},"\u041d\u0430\u0437\u0430\u0434"))),r.a.createElement(o.f,null,"Write for happiness"))},pe=n(134),be=n.n(pe),Se=(n(349),function(e){var t=Object(m.b)(),n=e.rubric;return r.a.createElement(o.s,{disabled:!0,className:"RubricSnippet",multiline:!0,before:r.a.createElement(o.b,{style:D,src:n.imageUrl}),caption:n.desc,after:r.a.createElement(be.a,{onClick:function(){t(N(n)),n.hasChildren?t(E("rubrics")):t(E("catalog"))}})},n.title)}),he=(n(350),function(e){var t=e.rubrics;return r.a.createElement(o.i,{className:"RubricsList"},t&&0!==t.length?t.map((function(e){return r.a.createElement(Se,{key:e.id,rubric:e})})):r.a.createElement(o.d,null,r.a.createElement("h3",null,"No rubrics =(")))}),ve=Object(o.z)(),Oe=function(e){var t=Object(m.b)(),n=Object(m.c)((function(e){return e.sheets.rubrics})),c=Object(m.c)((function(e){return e.sheets.loading})),l=Object(m.c)((function(e){return e.sheets.error})),u=Object(m.c)((function(e){return e.sheets.activeRubric})),i=Object(m.c)((function(e){return e.panel.activePanel})),f=Object(a.useState)(null),p=Object(s.a)(f,2),b=p[0],S=p[1];return Object(a.useEffect)((function(){u&&(u.hasChildren||u.parent)?t(A(u)):t(A())}),[t,u,i]),Object(a.useEffect)((function(){var e=r.a.createElement(d,{onClose:function(){return S(null)},error:l});l&&S(e)}),[l]),r.a.createElement(o.o,{id:e.id},r.a.createElement(o.p,{left:r.a.createElement(o.q,{onClick:function(){u&&(u.hasChildren||u.parent)?(u.parent?t(N(u.parent)):t(N(null)),t(E("rubrics"))):t(E("home"))}},ve===o.k?r.a.createElement(W.a,null):r.a.createElement(Q.a,null))},"Sheets Rubrics | ",u?u.title:"\u0432\u0441\u0435"),c?r.a.createElement(o.v,{size:"large",className:"SheetList-spinner"}):r.a.createElement(he,{rubrics:n}),b)},_e=(n(351),n(352),function(e){var t=Object(m.b)(),n=Object(m.c)((function(e){return e.panel.activePanel})),c=Object(m.c)((function(e){return e.modal.modal})),l=Object(m.c)((function(e){return e.validation.vkquery})),u=Object(m.c)((function(e){return e.popout.popout}));return Object(a.useEffect)((function(){t((function(e,t){var n=function(e){return e.slice(1).split("&").map((function(e){var t=e.split("=");return{key:t[0],value:t[1]}})).reduce((function(e,t){return e[t.key]=t.value,e}),{})},a=n(window.location.search),r=n(window.location.hash);a.vk_access_token_settings=decodeURIComponent(a.vk_access_token_settings),e({type:"GET_VK_QUERY",query:a,hash:r})})),t((function(e,t){i.a.sendPromise("VKWebAppGetUserInfo",{}).then((function(t){e({type:"GET_VK_USER_SUCCESS",user:t}),e(K())})).catch((function(t){e({type:"GET_VK_USER_ERROR",error:t})}))}))}),[t]),l?r.a.createElement(o.y,{popout:u,modal:c,activePanel:n},r.a.createElement(fe,{id:"about"}),r.a.createElement(ae,{id:"profilesettings"}),r.a.createElement(F,{id:"home"}),r.a.createElement(Oe,{id:"rubrics"}),r.a.createElement(ee,{id:"catalog"}),r.a.createElement(me,{id:"details"}),r.a.createElement(oe,{id:"editor"})):r.a.createElement("div",null,r.a.createElement(o.v,{size:"large",style:{marginTop:20}}),r.a.createElement(o.f,null,"Loading... If this doesn't go away you may be using the app outside of VK"))}),Te=n(41),Re=n(135),je={activePanel:"home"},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_PANEL":return{activePanel:t.panel};default:return e}},ge={vkquery:null},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_VK_QUERY":return Object(_.a)({},e,{vkquery:{query:t.query,hash:t.hash}});default:return e}},Ue={currentUser:null,error:null},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_VK_USER_SUCCESS":return Object(_.a)({},e,{currentUser:Object(_.a)({},e.currentUser,{profile:t.user})});case"GET_VK_USER_ERROR":return Object(_.a)({},e,{error:t.error});case"SEND_USER_DATA_SUCCESS":return Object(_.a)({},e);case"SEND_USER_DATA_ERROR":return Object(_.a)({},e,{error:t.error});case"GET_USER_SETTINGS_SUCCESS":return Object(_.a)({},e,{currentUser:Object(_.a)({},e.currentUser,{settings:t.settings})});case"GET_USER_SETTINGS_ERROR":return Object(_.a)({},e,{error:t.error});default:return e}},Ie={modal:null},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_MODAL":return{modal:t.modal};case"CLOSE_MODAL":return{modal:null};default:return e}},Ae={activeSheet:null,recentSheets:null,sheetBlueprints:null,rubrics:null,parentRubric:null,activeRubric:null,error:null,loading:!1},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_SHEET":return Object(_.a)({},e,{activeSheet:t.sheet&&t.sheet.blueprint?Object(_.a)({},t.sheet):null});case"SET_ACTIVE_RUBRIC":return Object(_.a)({},e,{activeRubric:t.rubric?Object(_.a)({},t.rubric):null});case"UPDATE_ACTIVE_SHEET_DATA":return Object(_.a)({},e,{activeSheet:Object(_.a)({},e.activeSheet,{data:Object(_.a)({},e.activeSheet.data,Object(T.a)({},t.id,t.data))})});case"GET_RECENT_SHEETS_SUCCESS":return Object(_.a)({},e,{loading:!1,error:null,recentSheets:t.sheets.map((function(e){return Object(_.a)({},e,{data:g(e.data)})}))});case"GET_RECENT_SHEET_ERROR":return Object(_.a)({},e,{loading:!1,error:t.error});case"GET_SHEET_BLUEPRINTS_SUCCESS":return Object(_.a)({},e,{error:null,loading:!1,sheetBlueprints:t.blueprints});case"POST_ACTIVE_SHEET_SUCCESS":return Object(_.a)({},e,{error:null,activeSheet:Object(_.a)({},t.sheet,{data:g(t.sheet.data)})});case"POST_ACTIVE_SHEET_ERROR":return Object(_.a)({},e,{error:t.error});case"GET_SHEET_BLUEPRINTS_ERROR":return Object(_.a)({},e,{loading:!1,error:t.error});case"DELETE_SHEET_SUCCESS":return Object(_.a)({},e,{error:null,activeSheet:e.activeSheet&&e.activeSheet.id===t.id?null:e.activeSheet});case"DELETE_SHEET_ERROR":return Object(_.a)({},e,{error:t.error});case"GET_SHEET_RUBRICS_SUCCESS":return Object(_.a)({},e,{error:null,loading:!1,rubrics:t.rubrics});case"GET_SHEET_RUBRICS_ERROR":return Object(_.a)({},e,{loading:!1,error:t.error});case"SET_LOADING":return Object(_.a)({},e,{loading:!0});default:return e}},Pe={popout:null},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_POPOUT":return{popout:t.popout};case"CLOSE_POPOUT":return{popout:null};default:return e}},Ge=Object(Te.c)({panel:Ce,validation:ye,user:Ne,modal:ke,sheets:Le,popout:De}),we=function(e){var t=e.children,n=e.store;return r.a.createElement(m.a,{store:n},t)};i.a.send("VKWebAppInit",{});var xe=Object(Te.d)(Ge,Object(Te.a)(Re.a)),Ve=function(){return r.a.createElement(we,{store:xe},r.a.createElement(_e,null))};l.a.render(r.a.createElement(Ve,null),document.getElementById("root"))}},[[188,1,2]]]);
//# sourceMappingURL=main.e681d120.chunk.js.map